# Maintainer: Zelun Kong <zelun.kong@outlook.com>

pkgname=rsync
pkgver=3.1.3
pkgrel=1
pkgdesc="A file transfer program to keep remote files in sync"
arch=('x86_64')
url="https://rsync.samba.org/"
depends=(acl popt)
# backup=(etc/rsyncd.conf)
source=($url/ftp/rsync/src/$pkgname-$pkgver.tar.gz{,.asc})
sha256sums=('55cc554efec5fdaad70de921cd5a5eeb6c29a95524c715f3bbf849235b0800c0'
            'SKIP')
validpgpkeys=('0048C8B026D4C96F0E589C2F6C859FB14B96A8C5')

# TODO: rsyncd

build() {
  cd $pkgname-$pkgver

  ./configure \
    --prefix=/usr \
		--disable-debug \
		--with-included-popt=no \
		--with-included-zlib=no

  make
}

check() {
  cd $pkgname-$pkgver

  make test
}

package() {
  cd $pkgname-$pkgver

  make DESTDIR="$pkgdir/" install
}
